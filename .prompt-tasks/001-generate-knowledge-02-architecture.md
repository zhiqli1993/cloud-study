# 任务：生成系统架构知识文档

## 目标
为指定的技术栈/项目创建完整的系统架构文档，深入解析技术架构设计、组件关系和数据流，帮助用户理解系统的整体设计理念和实现机制。

## 任务执行要求

### 1. 目录结构
```
{project}/knowledge/02-architecture/
├── README.md                    # 架构总览和索引
├── {component-1}.md            # 各个核心组件的架构详解
├── {component-2}.md
└── ...
```

### 2. README.md 必须包含的内容结构

#### 2.1 架构概览
- **设计理念**：系统的核心设计思想和原则
- **架构演进**：技术架构的发展历程和版本变化
- **关键特性**：区别于其他同类技术的架构特点
- **适用场景**：技术架构最适合的使用场景和规模

#### 2.2 整体架构图
```markdown
## 系统架构图

使用 Mermaid 创建多层次的架构图：

### 高层架构图
- 展示主要模块和子系统的关系
- 标明数据流向和控制流向
- 突出核心组件和边界

### 详细架构图  
- 展示具体组件和服务的交互
- 包含协议、端口、接口信息
- 标注关键的配置和参数

### 部署架构图
- 展示分布式部署的拓扑结构
- 包含网络分割和安全边界
- 标明高可用和容错机制
```

#### 2.3 组件架构索引
创建组件架构索引表格，包含：
- 组件名称
- 架构层级（控制平面/数据平面/管理平面等）
- 主要职责
- 依赖关系
- 详细文档链接

### 3. 各组件架构文档的标准结构

每个组件架构文档必须包含以下结构：

#### 3.1 组件概览
```markdown
# {组件名称} 架构解析

## 组件定位
- 在整体架构中的位置和作用
- 与其他组件的关系和依赖
- 责任边界和接口定义

## 设计目标
- 解决的核心问题
- 性能和可扩展性目标
- 安全和可靠性要求
```

#### 3.2 内部架构
```markdown
## 内部架构设计

### 模块结构图
使用 Mermaid 展示组件内部的模块划分：
- 核心模块和辅助模块
- 模块间的调用关系
- 数据存储和缓存结构

### 关键接口
- 对外提供的 API 接口
- 内部模块间的接口
- 与外部系统的集成接口

### 数据模型
- 核心数据结构定义
- 数据持久化策略
- 数据流转和变换
```

#### 3.3 运行机制
```markdown
## 工作流程

### 启动和初始化
- 启动顺序和依赖检查
- 配置加载和验证
- 资源分配和初始化

### 核心业务流程
使用 Mermaid 序列图展示：
- 典型的业务处理流程
- 错误处理和异常恢复
- 性能优化和资源管理

### 生命周期管理
- 组件的生命周期状态
- 优雅启动和关闭
- 运行时的状态监控
```

#### 3.4 技术实现
```markdown
## 技术细节

### 核心算法
- 关键算法的实现原理
- 时间复杂度和空间复杂度
- 算法优化和改进点

### 并发和锁机制
- 并发模型和线程安全
- 锁的使用和死锁避免
- 异步处理和事件驱动

### 网络通信
- 通信协议和消息格式
- 连接管理和重连机制
- 负载均衡和故障转移
```

#### 3.5 配置和调优
```markdown
## 架构配置

### 关键配置参数
- 性能相关的配置项
- 安全相关的配置项
- 集群和分布式配置

### 性能调优
- 性能瓶颈识别
- 调优参数和策略
- 监控指标和阈值

### 容量规划
- 资源需求评估
- 扩容策略和触发条件
- 成本优化建议
```

### 4. 文档质量要求

#### 4.1 架构图质量标准
- **清晰度**：图表信息层次分明，易于理解
- **准确性**：准确反映实际的架构关系
- **完整性**：涵盖关键的架构组件和连接
- **一致性**：不同图表间的表示方法保持一致

#### 4.2 技术深度要求
- **原理解析**：深入解释设计原理和实现机制
- **权衡分析**：说明架构选择的优缺点和权衡
- **实践指导**：提供实际部署和优化的指导
- **问题解决**：涵盖常见的架构问题和解决方案

### 5. 执行步骤

1. **架构调研**：深入研究目标技术的架构设计
2. **组件梳理**：识别和分类所有关键架构组件
3. **关系分析**：分析组件间的依赖和交互关系
4. **图表设计**：创建清晰的架构图和流程图
5. **文档编写**：按标准结构编写各组件的架构文档
6. **交叉验证**：确保文档间的一致性和准确性
7. **实践验证**：通过实际部署验证架构描述的准确性

### 6. 输出验证

完成后的架构文档应能够：
- 帮助架构师理解系统的设计理念和实现方案
- 为系统运维提供部署和故障排除的架构依据
- 支持性能调优和容量规划决策
- 指导系统的扩展和演进方向

## 适用范围

此任务模板适用于各种技术架构的分析，包括：
- 分布式系统架构（微服务、服务网格等）
- 平台架构（容器平台、PaaS平台等）
- 中间件架构（消息队列、数据库、缓存等）
- 云原生架构（Serverless、边缘计算等）
- 任何需要深入理解技术架构的复杂系统
