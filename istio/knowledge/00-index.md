# Istio 知识库索引

## 📚 文档结构

### [01. 核心组件](./01-components.md)
- **数据平面 (Data Plane)**
  - Envoy Proxy 功能和作用
- **控制平面 (Control Plane)**
  - Istiod 架构 (Pilot, Citadel, Galley)
- **流量管理组件**
  - Gateway, VirtualService, DestinationRule, ServiceEntry
- **安全组件**
  - PeerAuthentication, RequestAuthentication, AuthorizationPolicy
- **可观测性组件**
  - Telemetry, Prometheus, Grafana, Jaeger, Kiali
- **高级组件**
  - EnvoyFilter, WorkloadEntry, Sidecar

### [02. 架构设计](./02-architecture.md)
- **整体架构**
  - 数据平面与控制平面分离
- **部署模式**
  - 单集群、多集群、多网格部署
- **配置管理**
  - 配置验证、生效流程
- **扩展机制**
  - EnvoyFilter、外部授权
- **版本演进**
  - 从 1.0 到当前版本的发展

### [03. 工作原理](./03-working-principles.md)
- **Sidecar 模式详解**
  - 代理注入流程
  - 流量拦截机制
  - iptables 规则配置
- **服务发现机制**
  - Kubernetes 资源监听
  - xDS 配置分发 (LDS, RDS, CDS, EDS)
  - 配置同步流程
- **流量管理原理**
  - 请求路由匹配
  - 负载均衡算法
  - 健康检查机制
- **安全工作原理**
  - mTLS 身份验证
  - 证书生命周期管理
  - 授权决策机制

### [04. 可观测性](./04-observability.md)
- **指标收集**
  - Envoy 指标生成
  - Prometheus 抓取配置
  - 指标标签和维度
- **分布式追踪**
  - Trace 和 Span 结构
  - 追踪头传播机制
  - 采样策略配置
- **访问日志**
  - 日志格式配置
  - 自定义日志模板
- **监控告警**
  - 关键指标监控
  - 告警规则设置
  - Grafana 仪表板
- **故障诊断**
  - 日志分析技巧
  - 配置诊断方法
  - 流量分析工具

### [05. 性能优化](./05-optimization.md)
- **配置优化**
  - Sidecar 资源限制
  - 配置推送优化
- **资源管理**
  - 内存和 CPU 调优
  - 控制平面优化
- **网络性能**
  - TCP/HTTP/2 优化
  - TLS 性能调优
- **监控优化**
  - 指标收集优化
  - 采样率配置
- **扩展性优化**
  - 水平扩展配置
  - 多集群优化
- **缓存机制**
  - DNS 缓存
  - 连接预热
- **故障恢复**
  - 重试策略
  - 断路器配置

### [06. 配置转储分析](./06-config-dump.md)
- **基本用法**
  - Pod 配置转储获取
  - 特定类型配置查看
- **配置类型详解**
  - Listeners (监听器)
  - Clusters (集群)
  - Routes (路由)
  - Endpoints (端点)
  - Secrets (密钥)
  - Bootstrap (引导配置)
- **实用示例**
  - 连接问题调试
  - 流量策略验证
  - TLS 配置调试
- **配置分析技巧**
  - jq 过滤输出
  - 配置差异比较
  - 变化监控
- **故障排查应用**
  - 常见问题诊断
  - 高级用法示例
  - 最佳实践建议

### [07. 故障排查](./07-troubleshooting.md)
- **故障处理机制**
  - 熔断器状态转换
  - 重试和超时策略
- **常见问题**
  - Sidecar 注入失败
  - 服务发现问题
  - mTLS 认证问题
  - 路由规则不生效
  - Gateway 配置问题
  - 性能问题诊断
  - 安全策略问题
- **诊断工具**
  - istioctl 命令使用
  - 日志分析方法
  - 网络连通性测试
- **故障恢复策略**
  - 自动恢复机制
  - 应急处理流程

### [08. 最佳实践](./08-best-practices.md)
- **采用策略**
  - 渐进式部署
  - 金丝雀发布
- **生产环境建议**
  - 高可用配置
  - 多集群部署
  - 备份恢复策略
- **开发环境实践**
  - 快速开发配置
  - 调试技巧
- **升级策略**
  - 金丝雀升级
  - 回滚方案
- **安全最佳实践**
  - 网络策略配置
  - 证书管理
  - 最小权限原则
- **故障预防**
  - 配置验证
  - 渐进式部署

## 🔗 快速导航

### 按使用场景分类

#### 🚀 初学者入门
1. [组件概览](./01-components.md) - 了解 Istio 的核心组件
2. [架构设计](./02-architecture.md) - 理解整体架构
3. [工作原理](./03-working-principles.md) - 深入理解工作机制

#### 🛠️ 运维管理
1. [可观测性](./04-observability.md) - 监控和日志配置
2. [配置转储分析](./06-config-dump.md) - 配置调试和分析
3. [故障排查](./07-troubleshooting.md) - 问题诊断和解决
4. [最佳实践](./08-best-practices.md) - 生产环境建议

#### ⚡ 性能调优
1. [性能优化](./05-optimization.md) - 全面的性能优化指南
2. [最佳实践](./08-best-practices.md) - 资源管理建议

### 按技术领域分类

#### 网络和流量管理
- [工作原理 - 流量管理](./03-working-principles.md#流量管理工作原理)
- [组件 - 流量管理组件](./01-components.md#流量管理组件)
- [故障排查 - 路由问题](./07-troubleshooting.md#路由和流量管理问题)

#### 安全
- [组件 - 安全组件](./01-components.md#安全组件)
- [工作原理 - 安全机制](./03-working-principles.md#安全工作原理)
- [故障排查 - 安全问题](./07-troubleshooting.md#安全策略问题)

#### 监控和可观测性
- [可观测性完整指南](./04-observability.md)
- [组件 - 可观测性组件](./01-components.md#可观测性组件)
- [优化 - 监控优化](./05-optimization.md#监控和指标优化)

## 📖 使用建议

### 学习路径
1. **基础学习**：按顺序阅读 01-03 章节，建立基础概念
2. **实践应用**：结合 04-08 章节，在实际环境中应用
3. **问题解决**：遇到问题时查阅 06 配置分析和 07 故障排查章节
4. **持续优化**：参考 05 性能优化和 08 最佳实践

### 查阅建议
- 每个文档都有详细的目录和代码示例
- 使用浏览器搜索功能快速定位具体问题
- 关注文档底部的更新时间，确保信息时效性

## 📝 补充资源

### 配置示例
- [配置转储分析](./06-config-dump.md) - Envoy 配置分析示例

### 相关目录
- `/istio/demo/` - 演示应用和配置
- `/istio/templates/` - 常用配置模板
- `/istio/scripts/` - 安装和管理脚本

## 🔄 文档维护

本知识库基于原始 `Notes.md` 拆分而成，包含：
- **组件架构**：核心组件和架构设计
- **工作原理**：详细的技术实现机制
- **可观测性**：监控、日志、追踪等
- **性能优化**：全面的性能调优指南
- **故障排查**：常见问题和解决方案
- **最佳实践**：生产环境经验总结

---

*知识库创建时间: 2025-06-13*  
*最后更新时间: 2025-06-13*
