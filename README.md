# Cloud Study äº‘åŸç”Ÿå­¦ä¹ é¡¹ç›®

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªå…¨é¢çš„äº‘åŸç”ŸæŠ€æœ¯å­¦ä¹ å’Œå®è·µèµ„æºåº“ï¼ŒåŒ…å« Kubernetesã€æœåŠ¡ç½‘æ ¼ã€å®¹å™¨é•œåƒä»£ç†ç­‰æ ¸å¿ƒç»„ä»¶çš„é…ç½®ã€å®‰è£…è„šæœ¬å’Œæœ€ä½³å®è·µã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
cloud-study/
â”œâ”€â”€ README.md                          # é¡¹ç›®ä¸»æ–‡æ¡£
â”œâ”€â”€ containerd-config-patch.toml       # Containerd é…ç½®è¡¥ä¸
â”œâ”€â”€ kind/                              # Kind (Kubernetes in Docker) ç›¸å…³é…ç½®
â”‚   â”œâ”€â”€ install/                       # Kind å®‰è£…è„šæœ¬
â”‚   â””â”€â”€ templates/                     # Kind é›†ç¾¤é…ç½®æ¨¡æ¿
â”œâ”€â”€ istio/                             # Istio æœåŠ¡ç½‘æ ¼ç›¸å…³é…ç½®
â”‚   â””â”€â”€ install/                       # Istio å®‰è£…è„šæœ¬
â””â”€â”€ docker-registry-proxy/             # Docker é•œåƒä»“åº“ä»£ç†é…ç½®
    â”œâ”€â”€ configs/                       # ä»£ç†é…ç½®æ–‡ä»¶
    â”œâ”€â”€ manifests/                     # Kubernetes æ¸…å•æ–‡ä»¶
    â”œâ”€â”€ scripts/                       # éƒ¨ç½²è„šæœ¬
    â””â”€â”€ examples/                      # ä½¿ç”¨ç¤ºä¾‹
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®æ¡ä»¶

- Docker Desktop æˆ– Docker Engine
- Gitï¼ˆç”¨äºå…‹éš†é¡¹ç›®ï¼‰
- åŸºæœ¬çš„å‘½ä»¤è¡Œæ“ä½œçŸ¥è¯†

### åŸºæœ¬å·¥ä½œæµç¨‹

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone <repository-url>
   cd cloud-study
   ```

2. **å®‰è£… Kindï¼ˆæ¨èé¦–é€‰ï¼‰**
   ```bash
   # Linux/macOS
   cd kind/install && chmod +x install-kind.sh && ./install-kind.sh
   
   # Windows
   cd kind/install && install-kind.bat
   ```

3. **åˆ›å»º Kubernetes é›†ç¾¤**
   ```bash
   # ä½¿ç”¨å•èŠ‚ç‚¹æ¨¡æ¿ï¼ˆæ¨èå­¦ä¹ ä½¿ç”¨ï¼‰
   kind create cluster --config=kind/templates/kind-single-node.yaml
   
   # æˆ–ä½¿ç”¨å®Œæ•´åŠŸèƒ½æ¨¡æ¿
   kind create cluster --config=kind/templates/kind-config.yaml
   ```

4. **éªŒè¯é›†ç¾¤**
   ```bash
   kubectl cluster-info
   kubectl get nodes
   ```

## ğŸ“¦ ç»„ä»¶è¯¦è§£

### 1. Kind (Kubernetes in Docker)

**ç›®çš„**: åœ¨æœ¬åœ°å¿«é€Ÿåˆ›å»º Kubernetes é›†ç¾¤ç”¨äºå­¦ä¹ å’Œå¼€å‘

**ä¸»è¦ç‰¹æ€§**:
- ğŸŒ **é¢„é…ç½®å›½å†…é•œåƒæº** - è§£å†³å›½å†…ç½‘ç»œè®¿é—®é—®é¢˜
- ğŸ—ï¸ **å¤šç§é›†ç¾¤æ¨¡æ¿** - é€‚ç”¨ä¸åŒå­¦ä¹ åœºæ™¯
- âš¡ **å¿«é€Ÿéƒ¨ç½²** - å‡ åˆ†é’Ÿå†…åˆ›å»ºå®Œæ•´é›†ç¾¤
- ğŸ”§ **è·¨å¹³å°æ”¯æŒ** - Linuxã€macOSã€Windows

**å¯ç”¨æ¨¡æ¿**:
- `kind-single-node.yaml` - å•èŠ‚ç‚¹é›†ç¾¤ï¼ˆå­¦ä¹ æ¨èï¼‰
- `kind-config.yaml` - å®Œæ•´åŠŸèƒ½é›†ç¾¤
- `kind-multi-master.yaml` - é«˜å¯ç”¨é›†ç¾¤
- `kind-ingress-ready.yaml` - Ingress å°±ç»ªé›†ç¾¤

**è¯¦ç»†æ–‡æ¡£**: [kind/templates/README.md](kind/templates/README.md)

### 2. Istio æœåŠ¡ç½‘æ ¼

**ç›®çš„**: æä¾›å¾®æœåŠ¡é—´çš„æµé‡ç®¡ç†ã€å®‰å…¨ã€å¯è§‚æµ‹æ€§

**ä¸»è¦ç‰¹æ€§**:
- ğŸ“Š **æµé‡ç®¡ç†** - è·¯ç”±ã€è´Ÿè½½å‡è¡¡ã€ç†”æ–­
- ğŸ”’ **å®‰å…¨ç­–ç•¥** - mTLSã€è®¿é—®æ§åˆ¶
- ğŸ“ˆ **å¯è§‚æµ‹æ€§** - æŒ‡æ ‡ã€æ—¥å¿—ã€é“¾è·¯è¿½è¸ª
- ğŸŒ **è·¨å¹³å°å®‰è£…** - è‡ªåŠ¨åŒ–å®‰è£…è„šæœ¬

**å¿«é€Ÿå®‰è£…**:
```bash
# Linux/macOS
cd istio/install && chmod +x install-istio.sh && ./install-istio.sh

# Windows  
cd istio/install && install-istio.bat
```

**è¯¦ç»†æ–‡æ¡£**: [istio/install/README.md](istio/install/README.md)

### 3. Docker Registry ä»£ç†

**ç›®çš„**: è§£å†³å®¹å™¨é•œåƒæ‹‰å–çš„ç½‘ç»œå’Œæƒé™é—®é¢˜

**ä¸»è¦ç‰¹æ€§**:
- ğŸš€ **é•œåƒåŠ é€Ÿ** - é…ç½®å›½å†…é•œåƒåŠ é€Ÿå™¨
- ğŸ¢ **ä¼ä¸šä»£ç†** - æ”¯æŒä¼ä¸šç½‘ç»œä»£ç†
- ğŸ” **ç§æœ‰ä»“åº“** - ç§æœ‰é•œåƒä»“åº“è®¿é—®é…ç½®
- ğŸ”„ **æœ¬åœ°ç¼“å­˜** - æœ¬åœ°é•œåƒä»“åº“é›†æˆ

**æ”¯æŒåœºæ™¯**:
- HTTP/HTTPS ä»£ç†è®¿é—®å¤–éƒ¨ä»“åº“
- ç§æœ‰ Registry è®¤è¯é…ç½®
- é•œåƒåŠ é€Ÿå™¨é…ç½®
- Kind é›†ç¾¤æœ¬åœ° Registry é›†æˆ

**è¯¦ç»†æ–‡æ¡£**: [docker-registry-proxy/README.md](docker-registry-proxy/README.md)

## ğŸ¯ å­¦ä¹ è·¯å¾„æ¨è

### åˆå­¦è€…è·¯å¾„

1. **å®¹å™¨åŸºç¡€** âœ ç†è§£ Docker å®¹å™¨æ¦‚å¿µ
2. **Kind é›†ç¾¤** âœ åˆ›å»ºç¬¬ä¸€ä¸ª Kubernetes é›†ç¾¤
3. **åŸºç¡€æ“ä½œ** âœ å­¦ä¹  kubectl åŸºæœ¬å‘½ä»¤
4. **åº”ç”¨éƒ¨ç½²** âœ éƒ¨ç½²ç¬¬ä¸€ä¸ªåº”ç”¨åˆ°é›†ç¾¤

### è¿›é˜¶è·¯å¾„

1. **ç½‘ç»œé…ç½®** âœ é…ç½® Ingress å’ŒæœåŠ¡å‘ç°
2. **å­˜å‚¨ç®¡ç†** âœ æŒä¹…åŒ–å­˜å‚¨å’Œ ConfigMap
3. **æœåŠ¡ç½‘æ ¼** âœ å®‰è£…é…ç½® Istio
4. **å¯è§‚æµ‹æ€§** âœ ç›‘æ§ã€æ—¥å¿—ã€é“¾è·¯è¿½è¸ª

### å®æˆ˜è·¯å¾„

1. **å¤šé›†ç¾¤ç®¡ç†** âœ é«˜å¯ç”¨é›†ç¾¤é…ç½®
2. **CI/CD é›†æˆ** âœ æŒç»­é›†æˆå’Œéƒ¨ç½²
3. **å®‰å…¨æœ€ä½³å®è·µ** âœ RBACã€ç½‘ç»œç­–ç•¥ã€é•œåƒå®‰å…¨
4. **ç”Ÿäº§å°±ç»ª** âœ ç›‘æ§å‘Šè­¦ã€å¤‡ä»½æ¢å¤

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

### Kind é›†ç¾¤ç®¡ç†
```bash
# åˆ—å‡ºé›†ç¾¤
kind get clusters

# åˆ é™¤é›†ç¾¤
kind delete cluster --name=<é›†ç¾¤åç§°>

# åŠ è½½é•œåƒåˆ°é›†ç¾¤
kind load docker-image <é•œåƒåç§°>

# å¯¼å‡ºé›†ç¾¤é…ç½®
kind get kubeconfig --name=<é›†ç¾¤åç§°>
```

### Kubernetes åŸºç¡€æ“ä½œ
```bash
# æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯
kubectl cluster-info
kubectl get nodes

# æŸ¥çœ‹ Pod çŠ¶æ€
kubectl get pods --all-namespaces

# æŸ¥çœ‹æœåŠ¡
kubectl get services

# æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
kubectl describe pod <pod-name>
```

### Istio ç®¡ç†
```bash
# æ£€æŸ¥ Istio ç‰ˆæœ¬
istioctl version

# éªŒè¯å®‰è£…
istioctl verify-install

# åˆ†æé…ç½®
istioctl analyze

# æŸ¥çœ‹ä»£ç†çŠ¶æ€
istioctl proxy-status
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **é•œåƒæ‹‰å–å¤±è´¥**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - ä½¿ç”¨é…ç½®çš„é•œåƒåŠ é€Ÿå™¨
   - å‚è€ƒ [docker-registry-proxy](docker-registry-proxy/) é…ç½®

2. **é›†ç¾¤åˆ›å»ºå¤±è´¥**
   - ç¡®ä¿ Docker æ­£åœ¨è¿è¡Œ
   - æ£€æŸ¥ç«¯å£å ç”¨æƒ…å†µ
   - æŸ¥çœ‹ Kind æ—¥å¿—ï¼š`kind export logs`

3. **kubectl è¿æ¥å¤±è´¥**
   - æ£€æŸ¥ kubeconfig é…ç½®
   - éªŒè¯é›†ç¾¤çŠ¶æ€ï¼š`kind get clusters`

### è·å–å¸®åŠ©

- **Kubernetes å®˜æ–¹æ–‡æ¡£**: https://kubernetes.io/docs/
- **Kind æ–‡æ¡£**: https://kind.sigs.k8s.io/
- **Istio æ–‡æ¡£**: https://istio.io/latest/docs/
- **Docker æ–‡æ¡£**: https://docs.docker.com/

## ğŸŒŸ æœ€ä½³å®è·µ

### å¼€å‘ç¯å¢ƒé…ç½®
- ä½¿ç”¨å•èŠ‚ç‚¹ Kind é›†ç¾¤èŠ‚çœèµ„æº
- é…ç½®æœ¬åœ°é•œåƒä»“åº“åŠ é€Ÿå¼€å‘
- å¯ç”¨ Ingress æ”¯æŒæœ¬åœ°è®¿é—®

### å­¦ä¹ å»ºè®®
- ä»åŸºç¡€æ¦‚å¿µå¼€å§‹ï¼Œé€æ­¥æ·±å…¥
- åŠ¨æ‰‹å®è·µæ¯ä¸ªé…ç½®é€‰é¡¹
- é˜…è¯»å®˜æ–¹æ–‡æ¡£ç†è§£åŸç†
- å‚ä¸ç¤¾åŒºè®¨è®ºäº¤æµç»éªŒ

### å®‰å…¨è€ƒè™‘
- å®šæœŸæ›´æ–°ç»„ä»¶ç‰ˆæœ¬
- ä¸åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨æµ‹è¯•é…ç½®
- æ­£ç¡®é…ç½®ç½‘ç»œç­–ç•¥å’Œè®¿é—®æ§åˆ¶
- ç›‘æ§é›†ç¾¤å®‰å…¨çŠ¶æ€

## ğŸ“Š é¡¹ç›®çŠ¶æ€

- âœ… Kind é›†ç¾¤æ¨¡æ¿ï¼ˆåŒ…å«å›½å†…é•œåƒæºé…ç½®ï¼‰
- âœ… Istio è·¨å¹³å°å®‰è£…è„šæœ¬
- âœ… Docker Registry ä»£ç†é…ç½®
- âœ… å®Œæ•´çš„æ–‡æ¡£å’Œä½¿ç”¨ç¤ºä¾‹
- ğŸš§ æŒç»­æ›´æ–°å’Œä¼˜åŒ–ä¸­

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. **Fork é¡¹ç›®**
2. **åˆ›å»ºç‰¹æ€§åˆ†æ”¯**: `git checkout -b feature/your-feature`
3. **æäº¤æ›´æ”¹**: `git commit -am 'Add some feature'`
4. **æ¨é€åˆ†æ”¯**: `git push origin feature/your-feature`
5. **åˆ›å»º Pull Request**

### è´¡çŒ®ç±»å‹
- ğŸ› Bug ä¿®å¤
- âœ¨ æ–°åŠŸèƒ½æ·»åŠ 
- ğŸ“š æ–‡æ¡£æ”¹è¿›
- ğŸ¨ ä»£ç ä¼˜åŒ–
- ğŸ§ª æµ‹è¯•ç”¨ä¾‹

## ğŸ“ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- ğŸ“§ æäº¤ Issue
- ğŸ’¬ å‚ä¸ Discussions
- ğŸ”€ æäº¤ Pull Request

---

**ç¥æ‚¨äº‘åŸç”Ÿå­¦ä¹ ä¹‹æ—…æ„‰å¿«ï¼** ğŸ‰

> ğŸ’¡ **æç¤º**: å»ºè®®ä» Kind å•èŠ‚ç‚¹é›†ç¾¤å¼€å§‹ï¼Œé€æ­¥æ¢ç´¢æ›´å¤æ‚çš„é…ç½®å’Œåœºæ™¯ã€‚
